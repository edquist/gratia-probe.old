Installing the Gratia Condor probe client
Version 0.b
Penelope Constanta & Chris Green


We recommend that the client software be placed in the directory $VDT_LOCATION

1. Install the software:

  rpm -Uvh --relocate /opt/vdt/gratia="$VDT_LOCATION/gratia" \
      gratia-probe-common-<version>.noarch.rpm \


2. Install a specific probe such as gratia-probe-condor or
gratia-probe-psacct; or write your own based on samplemeter.pl or
samplemeter.py.

3. Customize the gratia ProbeConfig files for each probe, initializing
from ProbeTemplate if necessary. The following variables (at least)
should have appropriate values:

 ____________________________________________________________________________
|   Gratia Configuration Variable        |   Set value information           |
|________________________________________|___________________________________|
|MeterName="generic"                     |This value will be entered in the  | 
|                                        |database to indicate where the     |
|                                        |record came from.  We recommend a  |
|                                        |batchsystem:FQDN such as           |
|                                        |  'condor:fermigrid1.fnal.gov'     |
|________________________________________|___________________________________|
|SiteName="Generic Site"                 |This value use in the report to    | 
|                                        |refer to the site/farm/cluster     |
|                                        |to which the head node give access.|
|                                        |This is used in particular in the  |
|                                        |report.                            |
|________________________________________|___________________________________|
|WorkingFolder=                          |A temporary location to put the    |
|  "MAGIC_VDT_LOCATION/gratia/var/tmp"   |copied files. This location needs  |
|                                        |to have full access by the user    |
|                                        |that will run the cron job.        |
|                                        |Please expand the                  |
|                                        |MAGIC_VDT_LOCATION variable.       |
|________________________________________|___________________________________|
|LogFolder=                              |A location to store temporary log  |
|  "MAGIC_VDT_LOCATION/gratia/var/logs/" |files for debugging purposes. Same |
|                                        |restrictions as for the            |
|                                        |'WorkingFolder' directory.         |
|                                        |Please expand the                  |
|                                        |MAGIC_VDT_LOCATION variable.       |
|________________________________________|___________________________________|
|LogFolder=                              |A location to store temporary data |
|  "MAGIC_VDT_LOCATION/gratia/var/data/" |files. Same restrictions as for the|
|                                        |'WorkingFolder' directory.         |
|                                        |Please expand the                  |
|                                        |MAGIC_VDT_LOCATION variable.       |
|________________________________________|___________________________________|
|VDTSetupFile=                           |Path to the vdt setup.sh file.     |
|  "MAGIC_VDT_LOCATION/setup.sh"         |Please expand the                  |
|                                        |MAGIC_VDT_LOCATION variable.       |
|________________________________________|___________________________________|


4. For testing, use SOAPHost="cd-psg2.fnal.gov:8881". For production use
use the port specified in the probe directory README or in the case of
your own probe, contact osg-accounting@opensciencegrid.org.


