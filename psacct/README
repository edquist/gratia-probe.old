Installing the Gratia psacct probe client

Penelope Constanta & Chris Green

We recommend that the client software be placed in the directory $VDT_LOCATION

1. Install the software:

  rpm -Uvh --relocate /opt/vdt/gratia="$VDT_LOCATION/gratia" \
      gratia-probe-common-<version>.noarch.rpm \
      gratia-probe-psacct-<version>.noarch.rpm

	
2. Customize the gratia probe configuration file $VDT_LOCATION/gratia/probe/psacct/ProbeConfig
	o Edit the ProbeConfig file so that the following variables have the 
	  correct values:

 ____________________________________________________________________________
|   Gratia Configuration Variable        |   Set value information           |
|________________________________________|___________________________________|
|MeterName="generic"                     |This value will be entered in the  | 
|                                        |database to indicate where the     |
|                                        |record came from.  We recommend a  |
|                                        |batchsystem:FQDN such as           |
|                                        |  'psacct:fermigrid1.fnal.gov'     |
|________________________________________|___________________________________|
|SiteName="Generic Site"                 |This value use in the report to    | 
|                                        |refer to the site/farm/cluster     |
|                                        |to which the head node give access.|
|                                        |This is used in particular in the  |
|                                        |report.                            |
|________________________________________|___________________________________|

3. The RPM install procedure makes appropriate entries in root's crontab
for uploading accounting information to gratia at the appropriate
time. The time is appropriately randomized.

4. The SOAPHost has been preconfigured to use the official OSG Gratia
collector: change at your own risk.

5. If this is the first time you have installed the ps-accounting probe
on this node and you were previously running Fermilab Accountng (facct),
please see README-facct-migration.
